"use strict";!function(o,e,a){e.xbeeShowSpinner=function(e){o('.xbee-spinner[data-spinner="'+e+'"]').css("display","inline-block")},e.xbeeHideSpinner=function(e){o('.xbee-spinner[data-spinner="'+e+'"').css("display","none")},e.xbeeLoadOverlay=function(){if(0===o("#xbee-overlay").length){var e=o("<div></div>").attr("id","xbee-overlay"),a=o("<div></div>").attr("class","loader"),t=o('<img class="icon-xcoobee" />').attr("src",xbeeAdminParams.images.iconXcooBee),s=o('<img class="loader" />').attr("src",xbeeAdminParams.images.loader);o(t).appendTo(a),o(s).appendTo(a),o(a).appendTo(e),o("body").append(e)}},e.xbeeShowOverlay=function(){o("#xbee-overlay").css("display","table").animate({opacity:1},200)},e.xbeeHideOverlay=function(){o("#xbee-overlay").animate({opacity:0},200,function(){return o("#xbee-overlay").css("display","none")})},e.xbeeNotification=function(e,a,t){(e=o('.xbee-notification[data-notification="'+e+'"]')).attr("class","xbee-notification");var s="xbee-"+a;e.addClass(s),e.html('<span class="message">'+t+"</span>"),e.slideDown(500)},e.xbeeInputDisallowChars=function(e,t){e.on("paste",function(e){e.preventDefault()}),e.on("keypress",function(a){t.forEach(function(e){a.which===e.charCodeAt(0)&&a.preventDefault()})})},o(a).ready(function(){o(".xbee-notification").on("click",function(){o(this).slideUp(500)}),o("[data-xbee-disallow-chars]").each(function(){var e=o(this).data("xbee-disallow-chars").split(""),a=o(this);xbeeInputDisallowChars(a,e)}),o("[data-xbee-show-if-checked]").each(function(){var e=o(this).data("xbee-show-if-checked"),a=o("#"+e),t=o(this);a.on("change",function(){o(this).is(":checked")?t.show():t.hide()}).trigger("change")}),o(".radio-buttons-group input").each(function(){if(o(this).is(":checked")){var e=o(this).attr("id");o('.radio-buttons-group label[for="'+e+'"]').addClass("checked")}}),o(".radio-buttons-group label").on("click",function(){o(this).closest(".radio-buttons-group").find("input").prop("checked",!1),o(this).closest(".radio-buttons-group").find("label").removeClass("checked"),o(this).find("input").prop("checked",!0),o(this).addClass("checked")}),o(".xbee .tabs .tabs-nav .nav").on("click",function(e){e.preventDefault();var a=o(this).closest(".tabs"),t=o(this);if(!t.hasClass("active")){var s=t.data("nav");a.find(".tabs-nav .nav").removeClass("active"),a.find(".tabs-content .content").removeClass("active"),t.addClass("active"),o('.tabs-content .content[data-nav="'+s+'"]').addClass("active")}}),xbeeLoadOverlay(),o("#xbee-clear-message-logs").on("click",function(e){e.preventDefault();var a={action:"xbee_clear_message_logs",userId:o(e.target).data("userId")},t="";o.ajax({url:xbeeAdminParams.ajaxUrl,method:"post",data:a,success:function(e){e=JSON.parse(e),t=e.result?xbeeAdminParams.messages.successClearMessageLogs:e.errors?e.errors.join(" "):xbeeAdminParams.messages.errorClearMessageLogs,o("#xbee-message-logs tbody tr").css("background-color","#e1615f").fadeOut(500,function(){o("#xbee-message-logs tbody tr").remove(),o("#xbee-message-logs tbody").append("<tr><td>"+t+"</td></tr>")}),o(".xbee-information .xbee-clear-message-logs").remove()},error:function(){xbeeHideOverlay()}})}),o("#xbee-settings-general #test-keys").on("click",function(e){e.preventDefault();var a={action:"xbee_test_keys",apiKey:o('#xbee-settings-general [name="xbee_api_key"]').val(),apiSecret:o('#xbee-settings-general [name="xbee_api_secret"]').val()},t="";o.ajax({url:xbeeAdminParams.ajaxUrl,method:"post",data:a,beforeSend:function(){xbeeShowOverlay()},success:function(e){xbeeHideOverlay(),e=JSON.parse(e),t=e.result?xbeeAdminParams.messages.successValidKeys:e.errors?e.errors.join(" "):xbeeAdminParams.messages.errorTestKeys,xbeeNotification("test-api-keys",e.status,t)},error:function(){xbeeHideOverlay(),xbeeNotification("test-api-keys",response.status,xbeeAdminParams.messages.errorTestKeys.message)}})}),o("textarea, input").each(function(){var a=o(this),t=a.attr("maxlength");t&&a.on("keyup change paste",function(e){"1"==a.data("xbee-maxlen")&&e.target.value.length>=t?(a.css("border-color","#f00"),a.css("box-shadow","0 0 5px #ff7e7e"),setTimeout(function(){a.css("border-color",""),a.css("box-shadow","")},100)):e.target.value.length>=t?a.data("xbee-maxlen","1"):a.data("xbee-maxlen","0")})}),o('input[type="number"]').each(function(){var t=o(this),s=Number(t.attr("max")),n=Number(t.attr("min"));t.on("keyup keydown change paste",function(e){var a=Number(e.target.value);console.log(s),"number"==typeof s&&s<a&&(t.val(s),e.preventDefault()),"number"==typeof n&&a<n&&(t.val(n),e.preventDefault())})}),o(".xbee-tooltip").on("mouseover",function(){0===o(this).children(".tt").length&&o(this).append('<span class="tt">'.concat(o(this).data("tooltip"),"</span>")),o(this).find(".tt").show()}),o(".xbee-tooltip").on("mouseout",function(){o(this).find(".tt").hide()})})}(jQuery,window,document);